<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>信息窗口（入口、Popup、定制）</title>
  <link rel="stylesheet" href="./lib/leaflet/leaflet.css">
  <style>
    * {
      margin: 0;
      padding: 0;
    }

    #mapDiv {
      position: fixed;
      width: 100%;
      height: 100%;
    }

    .leaflet-popup-content-wrapper {
      overflow: hidden;
      padding: 0;
    }

    .content .leaflet-popup-content {
      width: 490px;
      height: 250px;
      margin: 0;
      line-height: 1.5;
      text-align: center;
      font-size: 16px;
    }

    /* .leaflet-popup-tip-container {
      left: 50%; 
      margin-left: -20px;
    } */

    
  </style>
</head>

<body>
  <div id="mapDiv"></div>
  <script src="./lib/leaflet/leaflet.js"></script>
  <script src="./js/urlTemplate.js"></script>
  <script>

    const map = L.map("mapDiv", {
      crs: L.CRS.EPSG3857,
      zoomControl: false,
      minZoom: 1,
      // attributionControl: true,
      zoomAnimation: false //缩放是否带动画
    }).setView([36.52, 120.31], 9);
    let Baselayer = L.tileLayer(urlTemplate.mapbox_Image, {
      maxZoom: 17,
      minZoom: 2
    }).addTo(map);

    // 画一个circle
    var circle = L.circle([36.92, 121.31], {
      color: 'green', //描边色
      fillColor: '#f03',  //填充色
      fillOpacity: 0.5, //透明度
      radius: 10000 //半径，单位米
    }).addTo(map);
    // 绑定一个弹窗
    circle.bindPopup('我是个圆');

    // 做一个maker
    var marker = L.marker([36.52, 120.31]).addTo(map);

    //maker上自定义一个popup
    var html = '<p>Hello world!<br />This is a nice popup.</p>'
    var popup = marker.bindPopup(html, { maxHeight: 250, maxWidth: 490, className: 'content', offset: [0, 0] }).on('popupopen', function (params) {
      console.log(params)
    });


    // 动态改变Popup的内容
    var mypop = L.popup();
    map.on('click', function (e) {
      mypop.setLatLng(e.latlng)
        .setContent('你临幸了这个点：<br>' + e.latlng.toString())
        .openOn(map);
    });

  </script>
</body>

</html>